{"ast":null,"code":"import _classCallCheck from \"/Users/zionhugh/GoogleDrive_Folder/Code_Practices/\\u8001\\u9A6C\\u57F9\\u8BAD/React-Redux/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/zionhugh/GoogleDrive_Folder/Code_Practices/\\u8001\\u9A6C\\u57F9\\u8BAD/React-Redux/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/zionhugh/GoogleDrive_Folder/Code_Practices/\\u8001\\u9A6C\\u57F9\\u8BAD/React-Redux/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/zionhugh/GoogleDrive_Folder/Code_Practices/\\u8001\\u9A6C\\u57F9\\u8BAD/React-Redux/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/zionhugh/GoogleDrive_Folder/Code_Practices/\\u8001\\u9A6C\\u57F9\\u8BAD/React-Redux/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/zionhugh/GoogleDrive_Folder/Code_Practices/\\u8001\\u9A6C\\u57F9\\u8BAD/React-Redux/src/view/UserList.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport store from '../store';\nimport { UserListActionCreators } from '../actions/UserListAction';\nimport { Popconfirm, message } from 'antd';\n\nvar UserList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserList, _Component);\n\n  function UserList(props) {\n    var _this;\n\n    _classCallCheck(this, UserList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserList).call(this, props));\n\n    _this.delUser = function (id) {\n      store.dispatch(UserListActionCreators.RemoveUserAsyncAction(id)).then(function (res) {\n        message.info('DeleteSuccess');\n      }).catch(function () {\n        message.error('DeleteFailed, Try again!');\n      });\n    };\n\n    _this.state = {\n      UserList: store.getState().UserList,\n      unsubscribe: store.subscribe(function () {\n        _this.setState({\n          UserList: store.getState().UserList\n        });\n      })\n    };\n    return _this;\n  }\n\n  _createClass(UserList, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.state.unsubscribe(); // 移除监听 \n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // 加载数据\n      axios.get('http://localhost:3009/userlist').then(function (res) {\n        // 放到store.state里面去。\n        console.log(res.data); // 向store发送一个action，加载用户数据\n\n        store.dispatch(UserListActionCreators.LoadUserListAction(res.data));\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, \"UserList\"), React.createElement(\"table\", {\n        className: \"table is-striped is-hoverable is-bordered\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, \"ID\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, \"UserName\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, \"Address\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, \"Phone\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, \"DelOrNot\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, \"Remark\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, \"Edit\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, this.state.UserList.map(function (item, index) {\n        return React.createElement(\"tr\", {\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, item.Id), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, item.UserName), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, item.Address), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, item.Phone), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, item.Del ? 'yes' : 'no'), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }, item.Remark), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"button is-primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, \"Edit\"), \"\\xA0\", React.createElement(Popconfirm, {\n          title: \"Sure To Delete?\",\n          okText: \"DELETE\",\n          cancelText: \"Cancel\",\n          onConfirm: function onConfirm() {\n            return _this2.delUser(item.Id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"button is-danger\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, \"Delete\"))));\n      }))));\n    }\n  }]);\n\n  return UserList;\n}(Component);\n\nexport default UserList;","map":{"version":3,"sources":["/Users/zionhugh/GoogleDrive_Folder/Code_Practices/老马培训/React-Redux/src/view/UserList.js"],"names":["React","Component","axios","store","UserListActionCreators","Popconfirm","message","UserList","props","delUser","id","dispatch","RemoveUserAsyncAction","then","res","info","catch","error","state","getState","unsubscribe","subscribe","setState","get","console","log","data","LoadUserListAction","map","item","index","Id","UserName","Address","Phone","Del","Remark"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,SAASC,sBAAT,QAAuC,2BAAvC;AACA,SAASC,UAAT,EAAqBC,OAArB,QAAoC,MAApC;;IAEMC,Q;;;;;AACJ,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,kFAAMA,KAAN;;AADiB,UA0BnBC,OA1BmB,GA0BT,UAACC,EAAD,EAAQ;AAChBP,MAAAA,KAAK,CAACQ,QAAN,CAAeP,sBAAsB,CAACQ,qBAAvB,CAA6CF,EAA7C,CAAf,EACGG,IADH,CACQ,UAAAC,GAAG,EAAI;AACXR,QAAAA,OAAO,CAACS,IAAR,CAAa,eAAb;AACD,OAHH,EAIGC,KAJH,CAIU,YAAM;AACZV,QAAAA,OAAO,CAACW,KAAR,CAAc,0BAAd;AACD,OANH;AAOD,KAlCkB;;AAEjB,UAAKC,KAAL,GAAa;AACXX,MAAAA,QAAQ,EAAEJ,KAAK,CAACgB,QAAN,GAAiBZ,QADhB;AAEXa,MAAAA,WAAW,EAAEjB,KAAK,CAACkB,SAAN,CAAgB,YAAM;AACjC,cAAKC,QAAL,CAAc;AACZf,UAAAA,QAAQ,EAAEJ,KAAK,CAACgB,QAAN,GAAiBZ;AADf,SAAd;AAGD,OAJY;AAFF,KAAb;AAFiB;AAUlB;;;;2CACsB;AACrB,WAAKW,KAAL,CAAWE,WAAX,GADqB,CACK;AAC3B;;;wCAEmB;AAClB;AACAlB,MAAAA,KAAK,CAACqB,GAAN,CAAU,gCAAV,EACGV,IADH,CACQ,UAAAC,GAAG,EAAI;AACX;AACAU,QAAAA,OAAO,CAACC,GAAR,CAAYX,GAAG,CAACY,IAAhB,EAFW,CAGX;;AACAvB,QAAAA,KAAK,CAACQ,QAAN,CAAeP,sBAAsB,CAACuB,kBAAvB,CAA0Cb,GAAG,CAACY,IAA9C,CAAf;AACD,OANH;AAOD;;;6BAYS;AAAA;;AACR,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAI,QAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADA,EAEA;AAAO,QAAA,SAAS,EAAC,2CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPF,CADF,CADF,EAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,KAAKR,KAAL,CAAWX,QAAX,CAAoBqB,GAApB,CAAyB,UAACC,IAAD,EAAOC,KAAP;AAAA,eACzB;AAAI,UAAA,GAAG,EAAEA,KAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAMD,IAAI,CAACE,EAAX,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAMF,IAAI,CAACG,QAAX,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAMH,IAAI,CAACI,OAAX,CAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAMJ,IAAI,CAACK,KAAX,CAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAML,IAAI,CAACM,GAAL,GAAW,KAAX,GAAmB,IAAzB,CALF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAMN,IAAI,CAACO,MAAX,CANF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAQ,UAAA,SAAS,EAAC,mBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,UAGE,oBAAC,UAAD;AAAY,UAAA,KAAK,EAAC,iBAAlB;AAAoC,UAAA,MAAM,EAAC,QAA3C;AAAoD,UAAA,UAAU,EAAC,QAA/D;AAAwE,UAAA,SAAS,EAAG;AAAA,mBAAM,MAAI,CAAC3B,OAAL,CAAaoB,IAAI,CAACE,EAAlB,CAAN;AAAA,WAApF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AACE,UAAA,SAAS,EAAC,kBADZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CAHF,CAPF,CADyB;AAAA,OAAzB,CADJ,CAZF,CAFA,CADF;AAsCD;;;;EA5EoB9B,S;;AA+EvB,eAAeM,QAAf","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios';\nimport store from '../store';\nimport { UserListActionCreators } from '../actions/UserListAction';\nimport { Popconfirm, message } from 'antd';\n\nclass UserList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      UserList: store.getState().UserList,\n      unsubscribe: store.subscribe(() => {\n        this.setState({\n          UserList: store.getState().UserList\n        })\n      })\n    };\n  }\n  componentWillUnmount() {\n    this.state.unsubscribe(); // 移除监听 \n  }\n\n  componentDidMount() {\n    // 加载数据\n    axios.get('http://localhost:3009/userlist')\n      .then(res => {\n        // 放到store.state里面去。\n        console.log(res.data)\n        // 向store发送一个action，加载用户数据\n        store.dispatch(UserListActionCreators.LoadUserListAction(res.data))\n      }); \n  }\n\n  delUser = (id) => {\n    store.dispatch(UserListActionCreators.RemoveUserAsyncAction(id))\n      .then(res => {\n        message.info('DeleteSuccess');\n      })\n      .catch( () => {\n        message.error('DeleteFailed, Try again!');\n      });\n  }\n\n  render () {\n    return (\n      <div>\n      <h3 className=\"title\">UserList</h3>\n      <table className=\"table is-striped is-hoverable is-bordered\">\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>UserName</th>\n            <th>Address</th>\n            <th>Phone</th>\n            <th>DelOrNot</th>\n            <th>Remark</th>\n            <th>Edit</th>\n          </tr>\n        </thead>\n        <tbody>\n          { this.state.UserList.map( (item, index) => \n            <tr key={index}>\n              <td>{ item.Id }</td>\n              <td>{ item.UserName }</td>\n              <td>{ item.Address }</td>\n              <td>{ item.Phone }</td>\n              <td>{ item.Del ? 'yes' : 'no' }</td>\n              <td>{ item.Remark }</td>\n              <td>\n                <button className=\"button is-primary\">Edit</button>\n                &nbsp;\n                <Popconfirm title=\"Sure To Delete?\" okText=\"DELETE\" cancelText=\"Cancel\" onConfirm={ () => this.delUser(item.Id) }>\n                  <button \n                    className=\"button is-danger\">Delete</button>\n                </Popconfirm>\n              </td>\n            </tr>\n           )}\n        </tbody>\n      </table>\n      </div>\n    )\n  }\n}\n\nexport default UserList"]},"metadata":{},"sourceType":"module"}